name: LinkedIn Auto Post

on:
  workflow_dispatch:  # Manual trigger

jobs:
  post_to_linkedin:
    runs-on: ubuntu-latest
    steps:
      - name: Post content to LinkedIn Page
        env:
          ACCESS_TOKEN: ${{ secrets.LINKEDIN_ACCESS_TOKEN }}
          PAGE_ID: ${{ secrets.LINKEDIN_PAGE_ID }}
        run: |
          curl -X POST https://api.linkedin.com/v2/ugcPosts \
            -H "Authorization: Bearer $ACCESS_TOKEN" \
            -H "Content-Type: application/json" \
            -d "{
              \"author\": \"urn:li:organization:$PAGE_ID\",
              \"lifecycleState\": \"PUBLISHED\",
              \"specificContent\": {
                \"com.linkedin.ugc.ShareContent\": {
                  \"shareCommentary\": {
                    \"text\": \"ðŸš€ From SSH to Serverless: The DevOps Journey Nobody Tells You About\n\nâœ… 90% invisible work\nâœ… 5% firefighting\nâœ… 5% pure magic\n\nðŸ’¡ Lessons worth sharing!\"
                  },
                  \"shareMediaCategory\": \"NONE\"
                }
              },
              \"visibility\": {
                \"com.linkedin.ugc.MemberNetworkVisibility\": \"PUBLIC\"
              }
            }"
