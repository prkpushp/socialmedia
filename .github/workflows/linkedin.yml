name: LinkedIn Auto Post

on:
  workflow_dispatch:  # Manual trigger

jobs:
  post_to_linkedin:
    runs-on: ubuntu-latest
    steps:
      - name: Post content to LinkedIn Page
        env:
          ACCESS_TOKEN: ${{ secrets.LINKEDIN_ACCESS_TOKEN }}
          PAGE_ID: ${{ secrets.LINKEDIN_PAGE_ID }}
        run: |
          curl -X POST https://api.linkedin.com/v2/ugcPosts \
            -H "Authorization: Bearer $ACCESS_TOKEN" \
            -H "Content-Type: application/json" \
            -d '{
              "author": "urn:li:person:lh3XwMSmya",
              "lifecycleState": "PUBLISHED",
              "specificContent": {
                "com.linkedin.ugc.ShareContent": {
                  "shareCommentary": {
                    "text": "Hello LinkedIn! Posting via API."
                  },
                  "shareMediaCategory": "NONE"
                }
              },
              "visibility": {
                "com.linkedin.ugc.MemberNetworkVisibility": "PUBLIC"
              }
            }'
